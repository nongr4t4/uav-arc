<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>UAV –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ç–æ—Ä</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 30px;
            max-width: 1000px;
            background: #f4f4f4;
        }
        h1, h2, h3 {
            margin-bottom: 8px;
        }
        input, select {
            width: 250px;
            margin-bottom: 10px;
            padding: 6px;
            font-size: 14px;
        }
        button {
            padding: 10px 16px;
            background: #2d72d9;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 15px;
        }
        button:disabled {
            opacity: 0.6;
            cursor: default;
        }
        #result {
            margin-top: 25px;
            padding: 20px;
            border-radius: 12px;
            background: #ffffff;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        .section {
            margin-top: 18px;
            padding-top: 12px;
            border-top: 1px solid #ddd;
        }
        .label {
            font-weight: bold;
        }
        .pill-ok {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            background: #d9f7c7;
            color: #256029;
            font-size: 12px;
            margin-left: 8px;
        }
        .pill-bad {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            background: #ffd2d2;
            color: #a00000;
            font-size: 12px;
            margin-left: 8px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 8px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 6px 8px;
            font-size: 14px;
        }
        th {
            background: #f0f0f0;
        }
        .mono {
            font-family: Consolas, monospace;
        }
        .small {
            font-size: 13px;
            color: #555;
        }
    </style>
</head>

<body>

<h1>UAV –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ç–æ—Ä</h1>
<p class="small">–í–≤–µ–¥–∏ –≤–∏–º–æ–≥–∏ –¥–æ –º—ñ—Å—ñ—ó ‚Äî –æ—Ç—Ä–∏–º–∞—î—à —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω—É –≥–≤–∏–Ω—Ç–æ–º–æ—Ç–æ—Ä–Ω—É –≥—Ä—É–ø—É, —ó—ó –∞–Ω–∞–ª—ñ–∑ —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏.</p>

<div id="form">
    <label>–ß–∞—Å –ø–æ–ª—å–æ—Ç—É (–≥–æ–¥–∏–Ω–∏):</label><br>
    <input id="timeHours" type="number" value="2" step="0.1"><br>

    <label>–†–∞–¥—ñ—É—Å –¥—ñ—ó (–∫–º):</label><br>
    <input id="radiusKm" type="number" value="30" step="1"><br>

    <label>–ö–æ—Ä–∏—Å–Ω–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (–∫–≥):</label><br>
    <input id="payloadKg" type="number" value="10" step="0.1"><br>

    <label>–ù–∏–∑—å–∫–∏–π —à—É–º:</label><br>
    <select id="lowNoise">
        <option value="true">–¢–∞–∫</option>
        <option value="false">–ù—ñ</option>
    </select><br>

    <label>–ë—é–¥–∂–µ—Ç ($):</label><br>
    <input id="budget" type="number" value="50000" step="100"><br><br>

    <button id="calcBtn" onclick="sendRequest()">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
</div>

<div id="result">
    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç –∑'—è–≤–∏—Ç—å—Å—è —Ç—É—Ç</h2>
</div>

<script>

// ------------------------------
// –ù–û–í–ê –†–û–ë–û–ß–ê –í–ï–†–°–Ü–Ø sendRequest()
// ------------------------------

async function sendRequest() {
    const btn = document.getElementById("calcBtn");
    const resultBox = document.getElementById("result");

    btn.disabled = true; // –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏
    resultBox.innerHTML = "<h2>‚è≥ –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫...</h2>";

    const data = {
        timeHours: parseFloat(document.getElementById("timeHours").value),
        radiusKm: parseFloat(document.getElementById("radiusKm").value),
        payloadKg: parseFloat(document.getElementById("payloadKg").value),
        lowNoise: document.getElementById("lowNoise").value === "true",
        budget: parseFloat(document.getElementById("budget").value)
    };

    try {
        console.log("üì§ –í—ñ–¥–ø—Ä–∞–≤–ª—è—é:", data);

        const response = await fetch("https://uav-arc-backend.onrender.com/api/configure", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify(data)
        });

        if (!response.ok) {
            const text = await response.text();
            console.error("‚ùå –ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ:", text);
            resultBox.innerHTML = `<h2>–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ ${response.status}</h2><pre>${text}</pre>`;
            return;
        }

        const json = await response.json();
        console.log("üì• –û—Ç—Ä–∏–º–∞–Ω–æ:", json);

        renderResult(json, data);

    } catch (err) {
        console.error("‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–ø–∏—Ç—É:", err);
        resultBox.innerHTML = `<h2>‚ùå –ü–æ–º–∏–ª–∫–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è</h2><p>${err}</p>`;
    }

    btn.disabled = false; // –∑–∞–≤–∂–¥–∏ —Ä–æ–∑–±–ª–æ–∫–æ–≤—É—î–º–æ –∫–Ω–æ–ø–∫—É
}

</script>

</body>
</html>
